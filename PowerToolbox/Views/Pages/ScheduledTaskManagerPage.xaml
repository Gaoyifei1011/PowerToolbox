<Page
    x:Class="PowerToolbox.Views.Pages.ScheduledTaskManagerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:rootservice="using:PowerToolbox.Services.Root"
    mc:Ignorable="d">

    <SplitView
        x:Name="ScheduledTaskSplitView"
        DisplayMode="Overlay"
        PaneBackground="Transparent"
        PanePlacement="Right">

        <SplitView.Content>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <StackPanel
                    Grid.Row="0"
                    Margin="30,15,30,0"
                    Orientation="Horizontal"
                    Spacing="5">

                    <TextBlock
                        HorizontalAlignment="Left"
                        FontSize="22"
                        Text="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('ScheduledTaskManager')}" />

                    <TextBlock VerticalAlignment="Bottom" Text="{x:Bind ScheduledTaskDescription, Mode=OneWay}" />
                </StackPanel>

                <!--  驱动管理控制栏  -->
                <Grid
                    Grid.Row="1"
                    Height="60"
                    Margin="30,5,30,3"
                    Padding="12,0,0,0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="{StaticResource ControlCornerRadius}">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <AutoSuggestBox
                        Grid.Column="0"
                        Margin="0,0,2,0"
                        VerticalAlignment="Center"
                        IsEnabled="{x:Bind GetIsLoadingOrOperating(ScheduledTaskResultKind), Mode=OneWay}"
                        PlaceholderText="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('SearchScheduledTaskPHText')}"
                        QueryIcon="Find"
                        QuerySubmitted="{x:Bind OnQuerySubmitted}"
                        Text="{x:Bind SearchText, Mode=OneWay}"
                        TextChanged="{x:Bind OnTextChanged}" />

                    <CommandBar
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        DefaultLabelPosition="Right">

                        <CommandBar.PrimaryCommands>
                            <AppBarButton
                                Click="{x:Bind OnSelectAllClicked}"
                                IsEnabled="{x:Bind GetIsLoadingOrOperating(ScheduledTaskResultKind), Mode=OneWay}"
                                Label="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('SelectAll')}">
                                <AppBarButton.Icon>
                                    <FontIcon Glyph="&#xE8B3;" />
                                </AppBarButton.Icon>
                            </AppBarButton>

                            <AppBarButton
                                Click="{x:Bind OnSelectNoneClicked}"
                                IsEnabled="{x:Bind GetIsLoadingOrOperating(ScheduledTaskResultKind), Mode=OneWay}"
                                Label="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('SelectNone')}">

                                <AppBarButton.Icon>
                                    <FontIcon Glyph="&#xE8E6;" />
                                </AppBarButton.Icon>
                            </AppBarButton>
                        </CommandBar.PrimaryCommands>
                    </CommandBar>

                    <Button
                        Grid.Column="2"
                        MinHeight="{ThemeResource AppBarThemeCompactHeight}"
                        Margin="-6,0,0,0"
                        Padding="{ThemeResource CommandBarMoreButtonMargin}"
                        VerticalAlignment="Center"
                        Foreground="{ThemeResource CommandBarForeground}"
                        IsAccessKeyScope="True"
                        Style="{ThemeResource EllipsisButton}">

                        <Button.Content>
                            <FontIcon
                                Height="{ThemeResource AppBarExpandButtonCircleDiameter}"
                                VerticalAlignment="Center"
                                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                FontSize="20"
                                Glyph="&#xE712;" />
                        </Button.Content>

                        <Button.Flyout>
                            <MenuFlyout Placement="Bottom">
                                <MenuFlyoutItem
                                    Click="{x:Bind OnRefreshClicked}"
                                    IsEnabled="{x:Bind GetIsLoadingOrOperating(ScheduledTaskResultKind), Mode=OneWay}"
                                    Text="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('Refresh')}">

                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE72C;" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>

                                <MenuFlyoutSeparator />

                                <MenuFlyoutItem
                                    Click="{x:Bind OnAddScheduledTaskClicked}"
                                    IsEnabled="{x:Bind GetIsLoadingOrOperating(ScheduledTaskResultKind), Mode=OneWay}"
                                    Text="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('AddScheduledTask')}">

                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE710;" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>

                                <MenuFlyoutItem
                                    Click="{x:Bind OnDeleteScheduledTaskClicked}"
                                    IsEnabled="{x:Bind GetIsLoadingOrOperating(ScheduledTaskResultKind), Mode=OneWay}"
                                    Text="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('DeleteScheduledTask')}">

                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE711;" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>

                                <MenuFlyoutSeparator />

                                <MenuFlyoutItem Click="{x:Bind OnUseInstructionClicked}" Text="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('UseInstruction')}">
                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE946;" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>

                                <MenuFlyoutItem Click="{x:Bind OnOpenScheduledTaskProgramClicked}" Text="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('OpenScheduledTaskProgram')}">
                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xED5A;" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>
                            </MenuFlyout>
                        </Button.Flyout>

                        <ToolTipService.ToolTip>
                            <ToolTip MaxWidth="9999" Content="{x:Bind rootservice:ResourceService.ScheduledTaskManagerResource.GetString('ViewMore')}" />
                        </ToolTipService.ToolTip>
                    </Button>
                </Grid>
            </Grid>
        </SplitView.Content>
    </SplitView>
</Page>

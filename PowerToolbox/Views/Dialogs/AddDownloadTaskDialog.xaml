<ContentDialog
    x:Class="PowerToolbox.Views.Dialogs.AddDownloadTaskDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:backdrophelper="using:PowerToolbox.Helpers.Backdrop"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:rootservice="using:PowerToolbox.Services.Root"
    xmlns:window="using:PowerToolbox.Views.Windows"
    Title="{x:Bind rootservice:ResourceService.DialogResource.GetString('AddTask')}"
    CloseButtonClick="{x:Bind OnCloseClicked}"
    CloseButtonText="{x:Bind rootservice:ResourceService.DialogResource.GetString('Cancel')}"
    Closing="{x:Bind OnClosing}"
    DefaultButton="Primary"
    FlowDirection="{x:Bind ((FrameworkElement)window:MainWindow.Current.Content).FlowDirection, Mode=OneWay}"
    IsPrimaryButtonEnabled="{x:Bind IsPrimaryEnabled}"
    Opened="{x:Bind OnOpened}"
    PrimaryButtonClick="{x:Bind OnDownloadClicked}"
    PrimaryButtonStyle="{ThemeResource AccentButtonStyle}"
    PrimaryButtonText="{x:Bind rootservice:ResourceService.DialogResource.GetString('Download')}"
    RequestedTheme="{x:Bind ((FrameworkElement)window:MainWindow.Current.Content).RequestedTheme, Mode=OneWay}"
    Style="{StaticResource DefaultContentDialogStyle}"
    mc:Ignorable="d">

    <StackPanel Spacing="5">
        <TextBox
            Height="120"
            Margin="0,0,0,5"
            HorizontalAlignment="Stretch"
            FontFamily="{StaticResource ContentControlThemeFontFamily}"
            FontSize="{StaticResource ControlContentThemeFontSize}"
            Foreground="{ThemeResource ContentDialogForeground}"
            PlaceholderText="{x:Bind rootservice:ResourceService.DialogResource.GetString('DownloadLinkPHText')}"
            Text="{x:Bind DownloadLinkText, Mode=OneWay}"
            TextAlignment="Justify"
            TextChanged="{x:Bind OnDownloadLinkTextChanged}"
            TextWrapping="Wrap" />

        <TextBox
            HorizontalAlignment="Stretch"
            FontFamily="{StaticResource ContentControlThemeFontFamily}"
            FontSize="{StaticResource ControlContentThemeFontSize}"
            Foreground="{ThemeResource ContentDialogForeground}"
            PlaceholderText="{x:Bind rootservice:ResourceService.DialogResource.GetString('DownloadFileNamePHText')}"
            Text="{x:Bind DownloadFileNameText, Mode=OneWay}"
            TextChanged="{x:Bind OnDownloadFileNameTextChanged}"
            TextWrapping="NoWrap" />

        <Grid ColumnSpacing="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBox
                Grid.Column="0"
                FontFamily="{StaticResource ContentControlThemeFontFamily}"
                FontSize="{StaticResource ControlContentThemeFontSize}"
                Foreground="{ThemeResource ContentDialogForeground}"
                IsReadOnly="True"
                PlaceholderText="{x:Bind rootservice:ResourceService.DialogResource.GetString('DownloadFolderPHText')}"
                Text="{x:Bind DownloadFolderText, Mode=OneWay}"
                TextChanged="{x:Bind OnDownloadFolderTextChanged}"
                TextWrapping="NoWrap" />

            <Button
                Grid.Column="1"
                Width="32"
                Height="32"
                Padding="0"
                Click="{x:Bind OnSelectFolderClicked}"
                CornerRadius="{StaticResource ControlCornerRadius}">

                <Button.Content>
                    <FontIcon FontSize="14" Glyph="&#xE8B7;" />
                </Button.Content>

                <ToolTipService.ToolTip>
                    <ToolTip
                        MaxWidth="9999"
                        Padding="0"
                        Background="Transparent">

                        <Grid>
                            <SystemBackdropElement CornerRadius="{StaticResource ControlCornerRadius}" SystemBackdrop="{StaticResource AcrylicBackgroundFillColorDefaultBackdrop}" />
                            <TextBlock Padding="{StaticResource ToolTipBorderPadding}" Text="{x:Bind rootservice:ResourceService.DialogResource.GetString('SelectFolder')}" />
                        </Grid>
                    </ToolTip>
                </ToolTipService.ToolTip>
            </Button>
        </Grid>
    </StackPanel>
</ContentDialog>

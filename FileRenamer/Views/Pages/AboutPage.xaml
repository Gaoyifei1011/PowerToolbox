<Page
    x:Class="FileRenamer.Views.Pages.AboutPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:collections="using:FileRenamer.Views.CustomControls.Collections"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:format="using:FileRenamer.Converters.Formats"
    xmlns:layout="using:FileRenamer.Views.CustomControls.Layout"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:FileRenamer.Models"
    xmlns:pageViewModel="using:FileRenamer.ViewModels.Pages"
    xmlns:root="using:FileRenamer.Services.Root"
    Loaded="{x:Bind ViewModel.OnLoaded}"
    NavigationCacheMode="Enabled"
    mc:Ignorable="d">

    <Page.DataContext>
        <pageViewModel:AboutViewModel x:Name="ViewModel" />
    </Page.DataContext>

    <Page.Resources>
        <format:AboutToolTipFormatConverter x:Name="AboutToolTipFormatConverter" />
    </Page.Resources>

    <ScrollViewer
        HorizontalScrollBarVisibility="Disabled"
        HorizontalScrollMode="Disabled"
        VerticalScrollBarVisibility="Auto"
        VerticalScrollMode="Enabled">

        <StackPanel
            Margin="30,0"
            Padding="0,10,0,30"
            Spacing="3">

            <!--  顶部栏用户控件  -->
            <Grid
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="4">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Image
                    Grid.Column="0"
                    Height="140"
                    Margin="15,0"
                    Source="ms-appx:///Assets/FileRenamer.png" />

                <StackPanel Grid.Column="1" VerticalAlignment="Center">

                    <TextBlock
                        Margin="0,0,0,10"
                        FontSize="30"
                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/AppDisplayName')}" />

                    <TextBlock
                        Margin="0,0,0,10"
                        FontSize="15"
                        Text="{x:Bind LocalizeAppVersion(ViewModel.AppVersion), Mode=OneWay}" />

                    <StackPanel Orientation="Horizontal">

                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="15"
                            Text="{x:Bind root:ResourceService.GetLocalized('About/Developer')}" />

                        <HyperlinkButton
                            VerticalAlignment="Center"
                            Click="{x:Bind ViewModel.OnDeveloperDescriptionClicked}"
                            Content="{x:Bind root:ResourceService.GetLocalized('About/DeveloperName')}"
                            Style="{StaticResource HyperlinkButtonStyle}">

                            <ToolTipService.ToolTip>
                                <ToolTip
                                    Content="{x:Bind root:ResourceService.GetLocalized('About/DeveloperNameToolTip')}"
                                    Placement="Bottom"
                                    VerticalOffset="25" />
                            </ToolTipService.ToolTip>
                        </HyperlinkButton>
                    </StackPanel>
                </StackPanel>

                <StackPanel
                    Grid.Column="2"
                    Margin="0,0,25,0"
                    VerticalAlignment="Center"
                    Spacing="5">

                    <Button
                        MinWidth="150"
                        Click="{x:Bind ViewModel.OnProjectDescriptionClicked}"
                        Content="{x:Bind root:ResourceService.GetLocalized('About/ProjectHomePage')}"
                        Style="{StaticResource AccentButtonStyle}">

                        <ToolTipService.ToolTip>
                            <ToolTip
                                Content="{x:Bind root:ResourceService.GetLocalized('About/ProjectHomePage')}"
                                Placement="Bottom"
                                VerticalOffset="20" />
                        </ToolTipService.ToolTip>
                    </Button>

                    <Button
                        MinWidth="150"
                        Click="{x:Bind ViewModel.OnSendFeedbackClicked}"
                        Content="{x:Bind root:ResourceService.GetLocalized('About/SendFeedback')}">

                        <ToolTipService.ToolTip>
                            <ToolTip
                                Content="{x:Bind root:ResourceService.GetLocalized('About/SendFeedback')}"
                                Placement="Bottom"
                                VerticalOffset="20" />
                        </ToolTipService.ToolTip>
                    </Button>

                    <Button
                        MinWidth="150"
                        Click="{x:Bind ViewModel.OnCheckUpdateClicked}"
                        Content="{x:Bind root:ResourceService.GetLocalized('About/CheckUpdate')}">

                        <ToolTipService.ToolTip>
                            <ToolTip
                                Content="{x:Bind root:ResourceService.GetLocalized('About/CheckUpdate')}"
                                Placement="Bottom"
                                VerticalOffset="20" />
                        </ToolTipService.ToolTip>
                    </Button>
                </StackPanel>
            </Grid>

            <!--  应用简介用户控件  -->
            <layout:Expander Style="{StaticResource ExpanderAboutStyle}" Visibility="Collapsed">
                <layout:Expander.Header>
                    <TextBlock Style="{StaticResource ExpanderHeaderStyle}" Text="{x:Bind root:ResourceService.GetLocalized('About/BriefIntroduction')}" />
                </layout:Expander.Header>
            </layout:Expander>

            <!--  项目引用用户控件  -->
            <layout:Expander Style="{StaticResource ExpanderAboutStyle}">
                <layout:Expander.Header>
                    <TextBlock Style="{StaticResource ExpanderHeaderStyle}" Text="{x:Bind root:ResourceService.GetLocalized('About/ReferenceTitle')}" />
                </layout:Expander.Header>

                <layout:Expander.Content>
                    <GridView
                        Margin="14,0"
                        Padding="5,3,0,0"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch"
                        BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="{ThemeResource ControlCornerRadius}"
                        ItemsSource="{x:Bind ViewModel.ReferenceDict}"
                        SelectionMode="None">
                        <GridView.ItemTemplate>
                            <DataTemplate x:DataType="model:ReferenceKeyValuePairModel">
                                <HyperlinkButton
                                    Width="150"
                                    Padding="5,8"
                                    HorizontalContentAlignment="Center"
                                    Content="{x:Bind Key}"
                                    NavigateUri="{x:Bind Value}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind Key, Converter={StaticResource AboutToolTipFormatConverter}, ConverterParameter=Reference}"
                                            Placement="Bottom"
                                            VerticalOffset="25" />
                                    </ToolTipService.ToolTip>
                                </HyperlinkButton>
                            </DataTemplate>
                        </GridView.ItemTemplate>
                    </GridView>
                </layout:Expander.Content>
            </layout:Expander>

            <!--  使用说明控件  -->
            <layout:Expander Style="{StaticResource ExpanderAboutStyle}" Visibility="Collapsed">
                <layout:Expander.Header>
                    <TextBlock Style="{StaticResource ExpanderHeaderStyle}" Text="{x:Bind root:ResourceService.GetLocalized('About/UseInstruction')}" />
                </layout:Expander.Header>
            </layout:Expander>

            <!--  注意事项用户控件  -->
            <layout:Expander Style="{StaticResource ExpanderAboutStyle}" Visibility="Collapsed">
                <layout:Expander.Header>
                    <TextBlock Style="{StaticResource ExpanderHeaderStyle}" Text="{x:Bind root:ResourceService.GetLocalized('About/Precaution')}" />
                </layout:Expander.Header>
            </layout:Expander>

            <!--  设置选项说明用户控件  -->
            <layout:Expander Style="{StaticResource ExpanderAboutStyle}" Visibility="Collapsed">
                <layout:Expander.Header>
                    <TextBlock Style="{StaticResource ExpanderHeaderStyle}" Text="{x:Bind root:ResourceService.GetLocalized('About/SettingsHelp')}" />
                </layout:Expander.Header>
            </layout:Expander>

            <!--  感谢用户控件  -->
            <layout:Expander Style="{StaticResource ExpanderAboutStyle}">
                <layout:Expander.Header>
                    <TextBlock Style="{StaticResource ExpanderHeaderStyle}" Text="{x:Bind root:ResourceService.GetLocalized('About/ThanksTitle')}" />
                </layout:Expander.Header>

                <layout:Expander.Content>
                    <GridView
                        Margin="14,0"
                        Padding="5,3,0,0"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch"
                        BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="{ThemeResource ControlCornerRadius}"
                        ItemsSource="{x:Bind ViewModel.ThanksDict}"
                        SelectionMode="None">
                        <GridView.ItemTemplate>
                            <DataTemplate x:DataType="model:ThanksKeyValuePairModel">
                                <HyperlinkButton
                                    Width="150"
                                    Padding="5,8"
                                    HorizontalContentAlignment="Center"
                                    Content="{x:Bind Key}"
                                    NavigateUri="{x:Bind Value}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind Key, Converter={StaticResource AboutToolTipFormatConverter}, ConverterParameter=Thanks}"
                                            Placement="Bottom"
                                            VerticalOffset="25" />
                                    </ToolTipService.ToolTip>
                                </HyperlinkButton>
                            </DataTemplate>
                        </GridView.ItemTemplate>
                    </GridView>
                </layout:Expander.Content>
            </layout:Expander>
        </StackPanel>
    </ScrollViewer>
</Page>
